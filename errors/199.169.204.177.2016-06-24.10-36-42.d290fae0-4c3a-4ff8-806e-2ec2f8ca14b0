(dp1
S'output'
p2
S"<class 'gluon.contrib.pymysql.err.InternalError'> (1205, u'Lock wait timeout exceeded; try restarting transaction')"
p3
sS'layer'
p4
S'/home/www-data/web2py/applications/travel/controllers/default.py'
p5
sS'code'
p6
S'# -*- coding: utf-8 -*-\n# this file is released under public domain and you can use without limitations\n\n# -------------------------------------------------------------------------\n# This is a sample controller\n# - index is the default action of any application\n# - user is required for authentication and authorization\n# - download is for downloading files uploaded in the db (does streaming)\n# -------------------------------------------------------------------------\nimport webbrowser\nimport gtk.gdk\nimport datetime\nimport time\nimport os, shutil\nimport glob\nimport pygeoip\nfrom selenium import webdriver\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.common.exceptions import TimeoutException\nfrom selenium.webdriver.common.by import By\nimport json\nimport requests\nimport os\nimport time\nimport threading\nfrom os import path\nfrom os import walk\nimport hashlib\n#from gluon.debug import dbg\n\n\n\ndef index():\n    return dict(form=auth())\n\n@auth.requires_login()\ndef source():\n    src = get_airport_code()\n    if not src:\n        form = display_code_form()\n    else:\n        form = \'\'\n        redirect(URL(\'home\'))\n\n    return dict(form=form, src=src)\n\n\n@auth.requires_login()\ndef home():\n    src = str(get_airport_code())\n    unique_path = str(get_user_hash())\n    dest = \'\'\n    full_dest =\'\'\n    if request.args==[]:\n        if(db((db.user_dest.created_by==auth.user.id)).select()):\n                if(db((db.user_request_images.created_by==auth.user.id)).select()):\n                    dest = db((db.user_request_images.created_by==auth.user.id)).select(db.user_request_images.destination_code, orderby=~db.user_request_images.created_on, limitby=(0,1)).first().destination_code\n                    full_dest = str(get_city_from_code(dest))\n                else:\n                    dest= \'\'\n                    fill_dest = \'\'\n        else:\n          redirect(URL(\'destinations\'), client_side=True)      \n\n    else:\n        if request.args[0] == \'refresh\':\n            process_screenshots()\n        dest = request.args[1]\n    path = request.env.web2py_path +\'/applications/\' +request.application + \'/static/images/\' + unique_path + \'/\' + src + \'/\' + dest + \'/\'\n    files= {}\n    image_rows = db((db.user_request_images.destination_code == dest) & (db.user_request_images.depart_date > datetime.date.today())).select(db.user_request_images.image_path, db.user_request_images.link_to)\n    for i in image_rows:\n        files[i.image_path] = i.link_to\n    dir_path = request.env.web2py_path +\'/applications/\' +request.application + \'/static/images/\' + unique_path + \'/\' + src + \'/\'\n    dirs = [x[0] for x in os.walk(dir_path)]\n    dirs = [d.replace(\'/home/www-data/web2py/applications/travel/static/images/\' + unique_path, \'\') for d in dirs]\n    if image_rows:\n        last_refreshed = db((db.user_request_images.destination_code == dest) & (db.user_request_images.created_by==auth.user.id)).select(db.user_request_images.created_on, orderby=~db.user_request_images.created_on, limitby=(0,1)).first().created_on\n        last_refreshed = last_refreshed.strftime("%m/%d/%Y %I:%M:%p")\n    else:\n        last_refreshed = \'\'\n    dest_picks = db((db.user_dest.created_by==auth.user.id)).select()\n    \n    return dict(files=files, dest=dest, dirs=dirs, src=src, last_refreshed=last_refreshed, dest_picks=dest_picks, unique_path=unique_path, full_dest=full_dest)\n\ndef images():\n    src = db((db.user_airport_code.created_by==auth.user.id)).select(db.user_request_images.image_path)\n    return dict(src=src)\n\ndef get_city_from_code(three_letter_code):\n    dest = db((db.airport_info.three_letter_code==three_letter_code)).select(db.airport_info.city).first().city\n    return dest\n\ndef display_code_form():\n    form = SQLFORM(db.user_airport_code)\n    if form.process().accepted:\n        response.flash = \'form accepted\'\n        redirect(URL(\'home\'))\n    elif form.errors:\n        response.flash = \'form has errors\'\n    else:\n        response.flash = \'please fill out the form\'\n    return form\n\ndef location():\n    ip = request.client\n    rawdata = pygeoip.GeoIP(request.env.web2py_path +\'/applications/\' +request.application + \'/static/GeoLiteCity.dat\')\n    data = rawdata.record_by_name(ip)\n    if data:\n        longi = data[\'longitude\']\n        lat = data[\'latitude\']\n    else:\n        lat = 100000\n        longi = -10000\n    return dict(lat=lat, longi=longi)\n\ndef get_airport_code():\n    src = db((db.user_airport_code.created_by==auth.user.id)).select(db.user_airport_code.three_letter_code)\n    if not src:\n        src = \'\'\n    else:\n        src = src.first().three_letter_code\n    return src\n\ndef image(): # http://.../image/where/ever/it/is.jpeg\n    filename = os.path.join(BASEDIR,\'/\'.join(request.args))\n    return response.stream(open(filename,\'rb\'))\n\ndef populate_weekend_dates(start_index, ttl_duration):\n    today = datetime.datetime.today().weekday()\n    weekend_dates = []\n    start= \'\'\n    if(today==3 or today==4):\n        start = datetime.datetime.now() + datetime.timedelta(days=3)\n    else:\n        start = datetime.datetime.now()\n    #3 months into the future\n    end =  (start + datetime.timedelta(ttl_duration*365/12))\n    begin = start\n    delta = datetime.timedelta(days=1)\n    diff = 0\n    #ONLY CALCULATE FRIDAY SINCE YOU CAN DO THE MATH FOR SUNDAY..\n    weekend = \'\'\n    if(start_index==4):\n        weekend = set([3])\n    elif(start_index==5):\n        weekend = set([4])\n    else:\n        weekend = set([4])\n    while(begin<=end):\n            if(begin.weekday() in weekend):\n                    weekend_dates.append(begin)\n                    diff+=1\n            begin+=delta\n    return weekend_dates\n\ndef browser_screenshot(url,start_date,end_date,dest,source):\n        unique_path = str(get_user_hash())\n        browser = driver = webdriver.PhantomJS()\n        browser.get(url)\n        delay = 0\n        wait = WebDriverWait(browser, delay)\n        wait.until(EC.presence_of_element_located((By.ID, \'root\')))\n        time.sleep(1)\n        stringtime = str(start_date) + \'->\' + str(end_date)\n        newdir = request.env.web2py_path +\'/applications/travel/static/images/\' + unique_path + \'/\' + source + \'/\' + dest + "/"\n        if not os.path.exists(newdir):\n                os.makedirs(newdir)\n        filename = request.env.web2py_path +\'/applications/travel/static/images/\' + unique_path + \'/\' + source+ \'/\' + dest + \'/flight\' + stringtime + ".png"\n        image = \'flight\' + stringtime + ".png"\n        db.user_request_images.insert(image_path=image, link_to=url, source_code = source, destination_code = dest, depart_date = start_date, return_date = end_date )\n        browser.save_screenshot(filename)\n        browser.close()\n\n\ndef call_all_destinations(source, weekend_dates, dest, start_index):\n        for d in dest:\n            for date in weekend_dates:\n                start_date = datetime.datetime.strftime(date,\'%Y-%m-%d\')\n                end_date = \'\'\n                if(start_index==4):\n                    end_date = datetime.datetime.strftime(date+datetime.timedelta(3),\'%Y-%m-%d\')\n                elif(start_index==5):\n                    end_date = datetime.datetime.strftime(date+datetime.timedelta(2),\'%Y-%m-%d\')\n                url = \'https://www.google.com/flights/#search;f=\'+source+\';t=\'+d+\';d=\'+start_date+\';r=\'+end_date+\'\'\n                browser_screenshot(url,start_date, end_date,d,source)\n\n\ndef delete_files(source):\n    unique_path = str(get_user_hash())\n    folder = request.env.web2py_path +\'/applications/travel/static/images/\' + unique_path + \'/\' + source + \'/\'\n    db((db.user_request_images.created_by==auth.user.id)).delete()\n    if os.path.isdir(folder):\n        for the_file in os.listdir(folder):\n            file_path = os.path.join(folder, the_file)\n            try:\n                if os.path.isfile(file_path):\n                    os.unlink(file_path)\n                elif os.path.isdir(file_path): shutil.rmtree(file_path)\n            except Exception as e:\n                print(e)\n\ndef process_screenshots():\n    dest = []\n    unique_path = str(get_user_hash())\n    start_index = request.args[0]\n    start_index = start_index.replace(\'D\',\'\')\n    ttl_duration = request.args[1]\n    ttl_duration = ttl_duration.replace(\'F\',\'\')\n    if(len(request.args) > 1):\n        for val in request.args[2:]:\n            dest.append(val)\n    else:\n        dest = [\'DEN\',\'LAX\', \'SFO\']\n    start_index = int(start_index)\n    ttl_duration = int(ttl_duration)\n    weekend_dates = populate_weekend_dates(start_index, ttl_duration)\n    source = get_airport_code()\n    delete_files(source)\n    if(source in dest):\n        dest.remove(source)\n    call_all_destinations(source, weekend_dates,dest, start_index)\n    db.commit()\n    redirect(URL(\'home\'), client_side=True)\n\n\ndef user_profile():\n    form = display_profile_form()\n    return dict(form=form)\n\ndef display_profile_form():\n    record = db.user_airport_code(auth.user.id)\n    form = SQLFORM(db.user_airport_code, record)\n    if form.process().accepted:\n        response.flash = \'form accepted\'\n    elif form.errors:\n        response.flash = \'form has errors\'\n    return form\n\ndef get_user_hash():\n    user_id = auth.user.id\n    user_id = hashlib.sha256(str(user_id)).hexdigest()\n    user_id = str(user_id[0:10])\n    return user_id\n\n\n\ndef destinations():\n    return dict(form=display_dest_form().process(),\n                dest=db((db.user_dest.created_by==auth.user.id)).select(db.user_dest.three_letter_code))\n\ndef display_dest_form():\n    form = SQLFORM(db.user_dest)\n    if form.process().accepted:\n        response.flash = request.args\n    elif form.errors:\n        response.flash = str(form.errors)\n    else:\n        response.flash = \'please fill out the form\'\n    return form\n\n\ndef delete_dest():\n    code = request.args[0]\n    if code==None:\n        output = "Missing parameter"\n        return output\n    dest = db((db.user_dest.created_by==auth.user.id) & (code ==db.user_dest.three_letter_code))\n    if dest==None:\n        output = "delete error"\n    else:\n        dest.delete()\n\ndef user():\n    """\n    exposes:\n    http://..../[app]/default/user/login\n    http://..../[app]/default/user/logout\n    http://..../[app]/default/user/register\n    http://..../[app]/default/user/profile\n    http://..../[app]/default/user/retrieve_password\n    http://..../[app]/default/user/change_password\n    http://..../[app]/default/user/bulk_register\n    use @auth.requires_login()\n        @auth.requires_membership(\'group name\')\n        @auth.requires_permission(\'read\',\'table name\',record_id)\n    to decorate functions that need access control\n    also notice there is http://..../[app]/appadmin/manage/auth to allow administrator to manage users\n    """\n    \n    return dict(form=auth())\n\n\n@cache.action()\ndef download():\n    """\n    allows downloading of uploaded files\n    http://..../[app]/default/download/[filename]\n    """\n    return response.download(request, db)\n\n\ndef call():\n    """\n    exposes services. for example:\n    http://..../[app]/default/call/jsonrpc\n    decorate with @services.jsonrpc the functions to expose\n    supports xml, json, xmlrpc, jsonrpc, amfrpc, rss, csv\n    """\n    return service()\n\nresponse._vars=response._caller(process_screenshots)\n'
p7
sS'snapshot'
p8
(dp9
S'exception'
p10
(dp11
S'__module__'
p12
S"'gluon.contrib.pymysql.err'"
p13
sS'__getslice__'
p14
S"<method-wrapper '__getslice__' of InternalError object>"
p15
sS'__str__'
p16
S"<method-wrapper '__str__' of InternalError object>"
p17
sS'__reduce__'
p18
S'<built-in method __reduce__ of InternalError object>'
p19
sS'__dict__'
p20
S'{}'
p21
sS'__sizeof__'
p22
S'<built-in method __sizeof__ of InternalError object>'
p23
sS'__weakref__'
p24
S'None'
p25
sS'__init__'
p26
S"<method-wrapper '__init__' of InternalError object>"
p27
sS'__setattr__'
p28
S"<method-wrapper '__setattr__' of InternalError object>"
p29
sS'__reduce_ex__'
p30
S'<built-in method __reduce_ex__ of InternalError object>'
p31
sS'__new__'
p32
S'<built-in method __new__ of type object>'
p33
sS'__format__'
p34
S'<built-in method __format__ of InternalError object>'
p35
sS'__class__'
p36
S"<class 'gluon.contrib.pymysql.err.InternalError'>"
p37
sS'__doc__'
p38
S"'Exception raised when the database encounters an...anymore, the transaction is\\n    out of sync, etc.'"
p39
sS'__getitem__'
p40
S"<method-wrapper '__getitem__' of InternalError object>"
p41
sS'__setstate__'
p42
S'<built-in method __setstate__ of InternalError object>'
p43
sS'__getattribute__'
p44
S"<method-wrapper '__getattribute__' of InternalError object>"
p45
sS'args'
p46
S"(1205, u'Lock wait timeout exceeded; try restarting transaction')"
p47
sS'__subclasshook__'
p48
S'<built-in method __subclasshook__ of type object>'
p49
sS'__unicode__'
p50
S'<built-in method __unicode__ of InternalError object>'
p51
sS'__delattr__'
p52
S"<method-wrapper '__delattr__' of InternalError object>"
p53
sS'__repr__'
p54
S"<method-wrapper '__repr__' of InternalError object>"
p55
sS'__hash__'
p56
S"<method-wrapper '__hash__' of InternalError object>"
p57
ssS'evalue'
p58
S"(1205, u'Lock wait timeout exceeded; try restarting transaction')"
p59
sS'request'
p60
cgluon.html
XML_unpickle
p61
(S's\xc3e\x00\x00<div><table><tr><td style="font-weight:bold;vertical-align:top;">ajax</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">application</td><td style="vertical-align:top;">:</td><td><div>travel</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">args</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>D4</div></td></tr><tr><td><div>F3</div></td></tr><tr><td><div>ORD</div></td></tr><tr><td><div>MSY</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cid</td><td style="vertical-align:top;">:</td><td><div>w2p_none</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">client</td><td style="vertical-align:top;">:</td><td><div>199.169.204.177</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">controller</td><td style="vertical-align:top;">:</td><td><div>default</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cookies</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">session_id_travel</td><td style="vertical-align:top;">:</td><td><div>199.169.204.177-c11e6655-6f0e-4b3b-aab8-2ab661222609<table><tr><td style="font-weight:bold;vertical-align:top;">comment</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">domain</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">expires</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">httponly</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">max-age</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">secure</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">version</td><td style="vertical-align:top;">:</td><td><div></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">env</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">CONTENT_LENGTH</td><td style="vertical-align:top;">:</td><td><div>0</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">CONTEXT_DOCUMENT_ROOT</td><td style="vertical-align:top;">:</td><td><div>/var/www</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">CONTEXT_PREFIX</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">DOCUMENT_ROOT</td><td style="vertical-align:top;">:</td><td><div>/var/www</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">GATEWAY_INTERFACE</td><td style="vertical-align:top;">:</td><td><div>CGI/1.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_ACCEPT</td><td style="vertical-align:top;">:</td><td><div>*/*</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_ACCEPT_ENCODING</td><td style="vertical-align:top;">:</td><td><div>gzip, deflate, br</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_ACCEPT_LANGUAGE</td><td style="vertical-align:top;">:</td><td><div>en-US,en;q=0.8</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_CONNECTION</td><td style="vertical-align:top;">:</td><td><div>keep-alive</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_COOKIE</td><td style="vertical-align:top;">:</td><td><div>session_id_travel=199.169.204.177-c11e6655-6f0e-4b3b-aab8-2ab661222609</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_HOST</td><td style="vertical-align:top;">:</td><td><div>iflyout.com</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_ORIGIN</td><td style="vertical-align:top;">:</td><td><div>https://iflyout.com</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_REFERER</td><td style="vertical-align:top;">:</td><td><div>https://iflyout.com/travel/default/home</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_USER_AGENT</td><td style="vertical-align:top;">:</td><td><div>Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.102 Safari/537.36</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_WEB2PY_COMPONENT_ELEMENT</td><td style="vertical-align:top;">:</td><td><div>w2p_none</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_WEB2PY_COMPONENT_LOCATION</td><td style="vertical-align:top;">:</td><td><div>https://iflyout.com/travel/default/home</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_X_REQUESTED_WITH</td><td style="vertical-align:top;">:</td><td><div>XMLHttpRequest</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">PATH_INFO</td><td style="vertical-align:top;">:</td><td><div>/travel/default/process_screenshots/D4/F3/ORD/MSY</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">PATH_TRANSLATED</td><td style="vertical-align:top;">:</td><td><div>/home/www-data/web2py/wsgihandler.py/travel/default/process_screenshots/D4/F3/ORD/MSY</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">QUERY_STRING</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">REMOTE_ADDR</td><td style="vertical-align:top;">:</td><td><div>199.169.204.177</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">REMOTE_PORT</td><td style="vertical-align:top;">:</td><td><div>15815</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">REQUEST_METHOD</td><td style="vertical-align:top;">:</td><td><div>POST</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">REQUEST_SCHEME</td><td style="vertical-align:top;">:</td><td><div>https</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">REQUEST_URI</td><td style="vertical-align:top;">:</td><td><div>/travel/default/process_screenshots/D4/F3/ORD/MSY</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SCRIPT_FILENAME</td><td style="vertical-align:top;">:</td><td><div>/home/www-data/web2py/wsgihandler.py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SCRIPT_NAME</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_ADDR</td><td style="vertical-align:top;">:</td><td><div>10.0.0.8</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_ADMIN</td><td style="vertical-align:top;">:</td><td><div>[no address given]</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_NAME</td><td style="vertical-align:top;">:</td><td><div>iflyout.com</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_PORT</td><td style="vertical-align:top;">:</td><td><div>443</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_PROTOCOL</td><td style="vertical-align:top;">:</td><td><div>HTTP/1.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_SIGNATURE</td><td style="vertical-align:top;">:</td><td><div>&lt;address&gt;Apache/2.4.7 (Ubuntu) Server at iflyout.com Port 443&lt;/address&gt;\n</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_SOFTWARE</td><td style="vertical-align:top;">:</td><td><div>Apache/2.4.7 (Ubuntu)</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SSL_TLS_SNI</td><td style="vertical-align:top;">:</td><td><div>iflyout.com</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">app_folders</td><td style="vertical-align:top;">:</td><td><div>set([&#x27;/home/www-data/web2py/applications/travel/&#x27;, &#x27;/home/www-data/web2py/applications/admin/&#x27;])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">applications_parent</td><td style="vertical-align:top;">:</td><td><div>/home/www-data/web2py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">content_length</td><td style="vertical-align:top;">:</td><td><div>0</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">context_document_root</td><td style="vertical-align:top;">:</td><td><div>/var/www</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">context_prefix</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">db_sessions</td><td style="vertical-align:top;">:</td><td><div>set([])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">debugging</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">document_root</td><td style="vertical-align:top;">:</td><td><div>/var/www</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">gateway_interface</td><td style="vertical-align:top;">:</td><td><div>CGI/1.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">gluon_parent</td><td style="vertical-align:top;">:</td><td><div>/home/www-data/web2py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_accept</td><td style="vertical-align:top;">:</td><td><div>*/*</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_accept_encoding</td><td style="vertical-align:top;">:</td><td><div>gzip, deflate, br</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_accept_language</td><td style="vertical-align:top;">:</td><td><div>en-US,en;q=0.8</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_connection</td><td style="vertical-align:top;">:</td><td><div>keep-alive</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_cookie</td><td style="vertical-align:top;">:</td><td><div>session_id_travel=199.169.204.177-c11e6655-6f0e-4b3b-aab8-2ab661222609</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_host</td><td style="vertical-align:top;">:</td><td><div>iflyout.com</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_origin</td><td style="vertical-align:top;">:</td><td><div>https://iflyout.com</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_referer</td><td style="vertical-align:top;">:</td><td><div>https://iflyout.com/travel/default/home</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_user_agent</td><td style="vertical-align:top;">:</td><td><div>Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.102 Safari/537.36</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_web2py_component_element</td><td style="vertical-align:top;">:</td><td><div>w2p_none</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_web2py_component_location</td><td style="vertical-align:top;">:</td><td><div>https://iflyout.com/travel/default/home</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_x_requested_with</td><td style="vertical-align:top;">:</td><td><div>XMLHttpRequest</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_jython</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_pypy</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_source</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">local_hosts</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>iflyout.com</div></td></tr><tr><td><div>73.246.151.222</div></td></tr><tr><td><div>::ffff:127.0.0.1</div></td></tr><tr><td><div>::1</div></td></tr><tr><td><div>ryan-MS-7850</div></td></tr><tr><td><div>127.0.1.1</div></td></tr><tr><td><div>127.0.0.1</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi.application_group</td><td style="vertical-align:top;">:</td><td><div>www.iflyout.com|</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi.callable_object</td><td style="vertical-align:top;">:</td><td><div>application</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi.enable_sendfile</td><td style="vertical-align:top;">:</td><td><div>0</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi.handler_script</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi.input_chunked</td><td style="vertical-align:top;">:</td><td><div>0</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi.listener_host</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi.listener_port</td><td style="vertical-align:top;">:</td><td><div>443</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi.process_group</td><td style="vertical-align:top;">:</td><td><div>web2py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi.queue_start</td><td style="vertical-align:top;">:</td><td><div>1466782602564509</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi.request_handler</td><td style="vertical-align:top;">:</td><td><div>wsgi-script</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi.script_reloading</td><td style="vertical-align:top;">:</td><td><div>1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi.version</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>3</div></td></tr><tr><td><div>4</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi_application_group</td><td style="vertical-align:top;">:</td><td><div>www.iflyout.com|</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi_callable_object</td><td style="vertical-align:top;">:</td><td><div>application</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi_enable_sendfile</td><td style="vertical-align:top;">:</td><td><div>0</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi_handler_script</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi_input_chunked</td><td style="vertical-align:top;">:</td><td><div>0</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi_listener_host</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi_listener_port</td><td style="vertical-align:top;">:</td><td><div>443</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi_process_group</td><td style="vertical-align:top;">:</td><td><div>web2py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi_queue_start</td><td style="vertical-align:top;">:</td><td><div>1466782602564509</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi_request_handler</td><td style="vertical-align:top;">:</td><td><div>wsgi-script</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi_script_reloading</td><td style="vertical-align:top;">:</td><td><div>1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">mod_wsgi_version</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>3</div></td></tr><tr><td><div>4</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path_info</td><td style="vertical-align:top;">:</td><td><div>/travel/default/process_screenshots/D4/F3/ORD/MSY</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path_translated</td><td style="vertical-align:top;">:</td><td><div>/home/www-data/web2py/wsgihandler.py/travel/default/process_screenshots/D4/F3/ORD/MSY</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">query_string</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">remote_addr</td><td style="vertical-align:top;">:</td><td><div>199.169.204.177</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">remote_port</td><td style="vertical-align:top;">:</td><td><div>15815</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">request_method</td><td style="vertical-align:top;">:</td><td><div>POST</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">request_scheme</td><td style="vertical-align:top;">:</td><td><div>https</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">request_uri</td><td style="vertical-align:top;">:</td><td><div>/travel/default/process_screenshots/D4/F3/ORD/MSY</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">script_filename</td><td style="vertical-align:top;">:</td><td><div>/home/www-data/web2py/wsgihandler.py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">script_name</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_addr</td><td style="vertical-align:top;">:</td><td><div>10.0.0.8</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_admin</td><td style="vertical-align:top;">:</td><td><div>[no address given]</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_name</td><td style="vertical-align:top;">:</td><td><div>iflyout.com</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_port</td><td style="vertical-align:top;">:</td><td><div>443</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_protocol</td><td style="vertical-align:top;">:</td><td><div>HTTP/1.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_signature</td><td style="vertical-align:top;">:</td><td><div>&lt;address&gt;Apache/2.4.7 (Ubuntu) Server at iflyout.com Port 443&lt;/address&gt;\n</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_software</td><td style="vertical-align:top;">:</td><td><div>Apache/2.4.7 (Ubuntu)</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">ssl_tls_sni</td><td style="vertical-align:top;">:</td><td><div>iflyout.com</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">web2py_path</td><td style="vertical-align:top;">:</td><td><div>/home/www-data/web2py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">web2py_version</td><td style="vertical-align:top;">:</td><td><div>2.14.6-stable+timestamp.2016.05.10.00.21.47</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.errors</td><td style="vertical-align:top;">:</td><td><div>&lt;mod_wsgi.Log object at 0x7f6b29e18b70&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.file_wrapper</td><td style="vertical-align:top;">:</td><td><div>&lt;built-in method file_wrapper of mod_wsgi.Adapter object at 0x7f6b28ed6eb8&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.input</td><td style="vertical-align:top;">:</td><td><div>&lt;mod_wsgi.Input object at 0x7f6b29352db0&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.multiprocess</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.multithread</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.run_once</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.url_scheme</td><td style="vertical-align:top;">:</td><td><div>https</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.version</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>1</div></td></tr><tr><td><div>0</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_errors</td><td style="vertical-align:top;">:</td><td><div>&lt;mod_wsgi.Log object at 0x7f6b29e18b70&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_file_wrapper</td><td style="vertical-align:top;">:</td><td><div>&lt;built-in method file_wrapper of mod_wsgi.Adapter object at 0x7f6b28ed6eb8&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_input</td><td style="vertical-align:top;">:</td><td><div>&lt;mod_wsgi.Input object at 0x7f6b29352db0&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_multiprocess</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_multithread</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_run_once</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_url_scheme</td><td style="vertical-align:top;">:</td><td><div>https</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_version</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>1</div></td></tr><tr><td><div>0</div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">extension</td><td style="vertical-align:top;">:</td><td><div>html</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">folder</td><td style="vertical-align:top;">:</td><td><div>/home/www-data/web2py/applications/travel/</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">function</td><td style="vertical-align:top;">:</td><td><div>process_screenshots</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">global_settings</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">app_folders</td><td style="vertical-align:top;">:</td><td><div>set([&#x27;/home/www-data/web2py/applications/travel/&#x27;, &#x27;/home/www-data/web2py/applications/admin/&#x27;])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">applications_parent</td><td style="vertical-align:top;">:</td><td><div>/home/www-data/web2py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">db_sessions</td><td style="vertical-align:top;">:</td><td><div>set([])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">debugging</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">gluon_parent</td><td style="vertical-align:top;">:</td><td><div>/home/www-data/web2py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_jython</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_pypy</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_source</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">local_hosts</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>iflyout.com</div></td></tr><tr><td><div>73.246.151.222</div></td></tr><tr><td><div>::ffff:127.0.0.1</div></td></tr><tr><td><div>::1</div></td></tr><tr><td><div>ryan-MS-7850</div></td></tr><tr><td><div>127.0.1.1</div></td></tr><tr><td><div>127.0.0.1</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">web2py_version</td><td style="vertical-align:top;">:</td><td><div>2.14.6-stable+timestamp.2016.05.10.00.21.47</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_https</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_local</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_restful</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_scheduler</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_shell</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">now</td><td style="vertical-align:top;">:</td><td><div>datetime.datetime(2016, 6, 24, 10, 36, 42, 565105)</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">raw_args</td><td style="vertical-align:top;">:</td><td><div>D4/F3/ORD/MSY</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">raw_extension</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">url</td><td style="vertical-align:top;">:</td><td><div>/travel/default/process_screenshots/D4/F3/ORD/MSY</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">utcnow</td><td style="vertical-align:top;">:</td><td><div>datetime.datetime(2016, 6, 24, 15, 36, 42, 565125)</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi</td><td style="vertical-align:top;">:</td><td><div>&lt;gluon.main.LazyWSGI object at 0x7f6b2854a7d0&gt;</div></td></tr></table></div>'
tRp62
sS'frames'
p63
(lp64
(dp65
S'file'
p66
S'/home/www-data/web2py/gluon/restricted.py'
p67
sS'dump'
p68
(dp69
S'environment'
p70
S"{'A': <class 'gluon.html.A'>, 'ANY_OF': <class 'gluon.validators.ANY_OF'>, 'ASSIGNJS': <function ASSIGNJS>, 'AppConfig': <function AppConfig>, 'Auth': <class 'gluon.tools.Auth'>, 'B': <class 'gluon.html.B'>, 'BEAUTIFY': <class 'gluon.html.BEAUTIFY'>, 'BODY': <class 'gluon.html.BODY'>, 'BR': <class 'gluon.html.BR'>, 'BUTTON': <class 'gluon.html.BUTTON'>, ...}"
p71
sS'ccode'
p72
S'<code object <module> at 0x7f6b29529bb0, file "/...ications/travel/controllers/default.py", line 10>'
p73
ssS'lnum'
p74
I227
sS'lines'
p75
(dp76
I224
S'            ccode = code'
p77
sI225
S'        else:'
p78
sI226
S'            ccode = compile2(code, layer)'
p79
sI227
S'        exec ccode in environment'
p80
sI228
S'    except HTTP:'
p81
sI229
S'        raise'
p82
sI230
S'    except RestrictedError:'
p83
sI231
S'        # do not encapsulate (obfuscate) the original RestrictedError'
p84
sI222
S'    try:'
p85
sI223
S'        if isinstance(code, types.CodeType):'
p86
ssS'call'
p87
S"(code='# -*- coding: utf-8 -*-\\n# this file is released ...onse._vars=response._caller(process_screenshots)\\n', environment={'A': <class 'gluon.html.A'>, 'ANY_OF': <class 'gluon.validators.ANY_OF'>, 'ASSIGNJS': <function ASSIGNJS>, 'AppConfig': <function AppConfig>, 'Auth': <class 'gluon.tools.Auth'>, 'B': <class 'gluon.html.B'>, 'BEAUTIFY': <class 'gluon.html.BEAUTIFY'>, 'BODY': <class 'gluon.html.BODY'>, 'BR': <class 'gluon.html.BR'>, 'BUTTON': <class 'gluon.html.BUTTON'>, ...}, layer='/home/www-data/web2py/applications/travel/controllers/default.py')"
p88
sS'func'
p89
S'restricted'
p90
sa(dp91
g66
S'/home/www-data/web2py/applications/travel/controllers/default.py'
p92
sg68
(dp93
sg74
I313
sg75
(dp94
I302
S''
sI303
S''
sI304
S'def call():'
p95
sI305
S'    """'
p96
sI306
S'    exposes services. for example:'
p97
sI307
S'    http://..../[app]/default/call/jsonrpc'
p98
sI308
S'    decorate with @services.jsonrpc the functions to expose'
p99
sI309
S'    supports xml, json, xmlrpc, jsonrpc, amfrpc, rss, csv'
p100
sI310
S'    """'
p101
sI311
S'    return service()'
p102
ssg87
S'()'
p103
sg89
S'<module>'
p104
sa(dp105
g66
S'/home/www-data/web2py/gluon/globals.py'
p106
sg68
(dp107
S'self'
p108
S'undefined'
p109
sS'f'
S'<function process_screenshots>'
p110
ssg74
I417
sg75
(dp111
I416
S'        self._vars = None'
p112
sI417
S'        self._caller = lambda f: f()'
p113
sI418
S'        self._view_environment = None'
p114
sI419
S'        self._custom_commit = None'
p115
sI420
S'        self._custom_rollback = None'
p116
sI421
S"        self.generic_patterns = ['*']"
p117
sI412
S"        self.flash = ''            # used by the default view layout"
p118
sI413
S'        self.meta = Storage()      # used by web2py_ajax.html'
p119
sI414
S'        self.menu = []             # used by the default view layout'
p120
sI415
S'        self.files = []            # used by web2py_ajax.html'
p121
ssg87
S'(f=<function process_screenshots>)'
p122
sg89
S'<lambda>'
p123
sa(dp124
g66
S'/home/www-data/web2py/applications/travel/controllers/default.py'
p125
sg68
(dp126
S'weekend_dates'
p127
S'[datetime.datetime(2016, 6, 30, 10, 36, 42, 635670), datetime.datetime(2016, 7, 7, 10, 36, 42, 635670), datetime.datetime(2016, 7, 14, 10, 36, 42, 635670), datetime.datetime(2016, 7, 21, 10, 36, 42, 635670), datetime.datetime(2016, 7, 28, 10, 36, 42, 635670), datetime.datetime(2016, 8, 4, 10, 36, 42, 635670), datetime.datetime(2016, 8, 11, 10, 36, 42, 635670), datetime.datetime(2016, 8, 18, 10, 36, 42, 635670), datetime.datetime(2016, 8, 25, 10, 36, 42, 635670), datetime.datetime(2016, 9, 1, 10, 36, 42, 635670), datetime.datetime(2016, 9, 8, 10, 36, 42, 635670), datetime.datetime(2016, 9, 15, 10, 36, 42, 635670), datetime.datetime(2016, 9, 22, 10, 36, 42, 635670)]'
p128
sS'global call_all_destinations'
p129
S'<function call_all_destinations>'
p130
sS'dest'
p131
S"['ORD', 'MSY']"
p132
sS'start_index'
p133
S'4'
sS'source'
p134
S"'SFO'"
p135
ssg74
I223
sg75
(dp136
I224
S'    db.commit()'
p137
sI225
S"    redirect(URL('home'), client_side=True)"
p138
sI226
S''
sI227
S''
sI218
S'    weekend_dates = populate_weekend_dates(start_index, ttl_duration)'
p139
sI219
S'    source = get_airport_code()'
p140
sI220
S'    delete_files(source)'
p141
sI221
S'    if(source in dest):'
p142
sI222
S'        dest.remove(source)'
p143
sI223
S'    call_all_destinations(source, weekend_dates,dest, start_index)'
p144
ssg87
S'()'
p145
sg89
S'process_screenshots'
p146
sa(dp147
g66
S'/home/www-data/web2py/applications/travel/controllers/default.py'
p148
sg68
(dp149
S'd'
S"'ORD'"
p150
sS'end_date'
p151
S"'2016-07-03'"
p152
sS'url'
p153
S"'https://www.google.com/flights/#search;f=SFO;t=ORD;d=2016-06-30;r=2016-07-03'"
p154
sS'source'
p155
S"'SFO'"
p156
sS'start_date'
p157
S"'2016-06-30'"
p158
sS'global browser_screenshot'
p159
S'<function browser_screenshot>'
p160
ssg74
I187
sg75
(dp161
I182
S'                if(start_index==4):'
p162
sI183
S"                    end_date = datetime.datetime.strftime(date+datetime.timedelta(3),'%Y-%m-%d')"
p163
sI184
S'                elif(start_index==5):'
p164
sI185
S"                    end_date = datetime.datetime.strftime(date+datetime.timedelta(2),'%Y-%m-%d')"
p165
sI186
S"                url = 'https://www.google.com/flights/#search;f='+source+';t='+d+';d='+start_date+';r='+end_date+''"
p166
sI187
S'                browser_screenshot(url,start_date, end_date,d,source)'
p167
sI188
S''
sI189
S''
sI190
S'def delete_files(source):'
p168
sI191
S'    unique_path = str(get_user_hash())'
p169
ssg87
S"(source='SFO', weekend_dates=[datetime.datetime(2016, 6, 30, 10, 36, 42, 635670), datetime.datetime(2016, 7, 7, 10, 36, 42, 635670), datetime.datetime(2016, 7, 14, 10, 36, 42, 635670), datetime.datetime(2016, 7, 21, 10, 36, 42, 635670), datetime.datetime(2016, 7, 28, 10, 36, 42, 635670), datetime.datetime(2016, 8, 4, 10, 36, 42, 635670), datetime.datetime(2016, 8, 11, 10, 36, 42, 635670), datetime.datetime(2016, 8, 18, 10, 36, 42, 635670), datetime.datetime(2016, 8, 25, 10, 36, 42, 635670), datetime.datetime(2016, 9, 1, 10, 36, 42, 635670), datetime.datetime(2016, 9, 8, 10, 36, 42, 635670), datetime.datetime(2016, 9, 15, 10, 36, 42, 635670), datetime.datetime(2016, 9, 22, 10, 36, 42, 635670)], dest=['ORD', 'MSY'], start_index=4)"
p170
sg89
S'call_all_destinations'
p171
sa(dp172
g66
S'/home/www-data/web2py/applications/travel/controllers/default.py'
p173
sg68
(dp174
S'link_to'
p175
g109
sS'destination_code'
p176
g109
sS'image_path'
p177
g109
sS'end_date'
p178
S"'2016-07-03'"
p179
sS'source'
p180
S"'SFO'"
p181
sS'db.user_request_images.insert'
p182
S'<bound method Table.insert of <Table user_reques...reated_by, is_active, modified_on, modified_by)>>'
p183
sS'image'
p184
S"'flight2016-06-30->2016-07-03.png'"
p185
sS'start_date'
p186
S"'2016-06-30'"
p187
sS'dest'
p188
S"'ORD'"
p189
sS'url'
p190
S"'https://www.google.com/flights/#search;f=SFO;t=ORD;d=2016-06-30;r=2016-07-03'"
p191
sS'return_date'
p192
g109
sS'global db'
p193
S'<DAL uri="mysql:******@localhost/travel">'
p194
sS'db.user_request_images'
p195
S'<Table user_request_images (id, image_path, link...created_by, is_active, modified_on, modified_by)>'
p196
sS'source_code'
p197
g109
sS'depart_date'
p198
g109
ssg74
I172
sg75
(dp199
I167
S'        newdir = request.env.web2py_path +\'/applications/travel/static/images/\' + unique_path + \'/\' + source + \'/\' + dest + "/"'
p200
sI168
S'        if not os.path.exists(newdir):'
p201
sI169
S'                os.makedirs(newdir)'
p202
sI170
S'        filename = request.env.web2py_path +\'/applications/travel/static/images/\' + unique_path + \'/\' + source+ \'/\' + dest + \'/flight\' + stringtime + ".png"'
p203
sI171
S'        image = \'flight\' + stringtime + ".png"'
p204
sI172
S'        db.user_request_images.insert(image_path=image, link_to=url, source_code = source, destination_code = dest, depart_date = start_date, return_date = end_date )'
p205
sI173
S'        browser.save_screenshot(filename)'
p206
sI174
S'        browser.close()'
p207
sI175
S''
sI176
S''
ssg87
S"(url='https://www.google.com/flights/#search;f=SFO;t=ORD;d=2016-06-30;r=2016-07-03', start_date='2016-06-30', end_date='2016-07-03', dest='ORD', source='SFO')"
p208
sg89
S'browser_screenshot'
p209
sa(dp210
g66
S'/home/www-data/web2py/gluon/packages/dal/pydal/objects.py'
p211
sg68
(dp212
S'self._listify'
p213
S'<bound method Table._listify of <Table user_requ...reated_by, is_active, modified_on, modified_by)>>'
p214
sS'fields'
p215
S"{'created_by': 23L, 'created_on': datetime.datetime(2016, 6, 24, 10, 36, 42, 565105), 'depart_date': '2016-06-30', 'destination_code': 'ORD', 'image_path': 'flight2016-06-30->2016-07-03.png', 'is_active': True, 'link_to': 'https://www.google.com/flights/#search;f=SFO;t=ORD;d=2016-06-30;r=2016-07-03', 'modified_by': <function lazy_user>, 'modified_on': datetime.datetime(2016, 6, 24, 10, 36, 42, 565105), 'return_date': '2016-07-03', ...}"
p216
sS'self'
p217
S'<Table user_request_images (id, image_path, link...created_by, is_active, modified_on, modified_by)>'
p218
sS'ret'
p219
g109
sS'self._db._adapter'
p220
S'<pydal.adapters.mysql.MySQLAdapter object>'
p221
sS'self._db._adapter.insert'
p222
S'<bound method MySQLAdapter.insert of <pydal.adapters.mysql.MySQLAdapter object>>'
p223
sS'self._db'
p224
S'<DAL uri="mysql:******@localhost/travel">'
p225
ssg74
I726
sg75
(dp226
I721
S'    def insert(self, **fields):'
p227
sI722
S'        fields = self._defaults(fields)'
p228
sI723
S'        self._attempt_upload(fields)'
p229
sI724
S'        if any(f(fields) for f in self._before_insert):'
p230
sI725
S'            return 0'
p231
sI726
S'        ret = self._db._adapter.insert(self, self._listify(fields))'
p232
sI727
S'        if ret and self._after_insert:'
p233
sI728
S'            fields = Row(fields)'
p234
sI729
S'            [f(fields, ret) for f in self._after_insert]'
p235
sI730
S'        return ret'
p236
ssg87
S"(self=<Table user_request_images (id, image_path, link...created_by, is_active, modified_on, modified_by)>, **fields={'created_by': 23L, 'created_on': datetime.datetime(2016, 6, 24, 10, 36, 42, 565105), 'depart_date': '2016-06-30', 'destination_code': 'ORD', 'image_path': 'flight2016-06-30->2016-07-03.png', 'is_active': True, 'link_to': 'https://www.google.com/flights/#search;f=SFO;t=ORD;d=2016-06-30;r=2016-07-03', 'modified_by': <function lazy_user>, 'modified_on': datetime.datetime(2016, 6, 24, 10, 36, 42, 565105), 'return_date': '2016-07-03', ...})"
p237
sg89
S'insert'
p238
sa(dp239
g66
S'/home/www-data/web2py/gluon/packages/dal/pydal/adapters/base.py'
p240
sg68
(dp241
S'e'
S"InternalError(1205, u'Lock wait timeout exceeded; try restarting transaction')"
p242
ssg74
I746
sg75
(dp243
I741
S'            self.execute(query)'
p244
sI742
S'        except Exception:'
p245
sI743
S'            e = sys.exc_info()[1]'
p246
sI744
S"            if hasattr(table,'_on_insert_error'):"
p247
sI745
S'                return table._on_insert_error(table,fields,e)'
p248
sI746
S'            raise e'
p249
sI747
S"        if hasattr(table, '_primarykey'):"
p250
sI748
S'            mydict = dict([(k[0].name, k[1]) for k in fields if k[0].name in table._primarykey])'
p251
sI749
S'            if mydict != {}:'
p252
sI750
S'                return mydict'
p253
ssg87
S"(self=<pydal.adapters.mysql.MySQLAdapter object>, table=<Table user_request_images (id, image_path, link...created_by, is_active, modified_on, modified_by)>, fields=[(<pydal.objects.Field object>, 'https://www.google.com/flights/#search;f=SFO;t=ORD;d=2016-06-30;r=2016-07-03'), (<pydal.objects.Field object>, 'ORD'), (<pydal.objects.Field object>, 'flight2016-06-30->2016-07-03.png'), (<pydal.objects.Field object>, True), (<pydal.objects.Field object>, 23L), (<pydal.objects.Field object>, datetime.datetime(2016, 6, 24, 10, 36, 42, 565105)), (<pydal.objects.Field object>, '2016-07-03'), (<pydal.objects.Field object>, datetime.datetime(2016, 6, 24, 10, 36, 42, 565105)), (<pydal.objects.Field object>, <function lazy_user>), (<pydal.objects.Field object>, 'SFO'), (<pydal.objects.Field object>, '2016-06-30')])"
p254
sg89
g238
sasS'pyver'
p255
S'Python 2.7.6: /usr/bin/python (prefix: /usr)'
p256
sS'session'
p257
g61
(S'sa\x08\x00\x00<div><table><tr><td style="font-weight:bold;vertical-align:top;">auth</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">expiration</td><td style="vertical-align:top;">:</td><td><div>3600</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">hmac_key</td><td style="vertical-align:top;">:</td><td><div>86725a4f-fc49-4c13-9c34-6e1e317fd6ea</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">last_visit</td><td style="vertical-align:top;">:</td><td><div>datetime.datetime(2016, 6, 24, 10, 36, 13, 416559)</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">user</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">email</td><td style="vertical-align:top;">:</td><td><div>jsmith5@gmail.com</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">first_name</td><td style="vertical-align:top;">:</td><td><div>John</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">id</td><td style="vertical-align:top;">:</td><td><div>23L</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">last_name</td><td style="vertical-align:top;">:</td><td><div>Smith</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">registration_id</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">registration_key</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">reset_password_key</td><td style="vertical-align:top;">:</td><td><div></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">user_groups</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">23</td><td style="vertical-align:top;">:</td><td><div>user_23</div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">flash</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr></table></div>'
tRp258
sS'etype'
p259
S"<class 'gluon.contrib.pymysql.err.InternalError'>"
p260
sS'date'
p261
S'Fri Jun 24 10:37:36 2016'
p262
sS'response'
p263
g61
(S's\xe4\x1f\x00\x00<div><table><tr><td style="font-weight:bold;vertical-align:top;">body</td><td style="vertical-align:top;">:</td><td><div>&lt;cStringIO.StringO object at 0x7f6b285487a0&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cookies</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">session_id_travel</td><td style="vertical-align:top;">:</td><td><div>199.169.204.177-c11e6655-6f0e-4b3b-aab8-2ab661222609<table><tr><td style="font-weight:bold;vertical-align:top;">comment</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">domain</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">expires</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">httponly</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">max-age</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path</td><td style="vertical-align:top;">:</td><td><div>/</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">secure</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">version</td><td style="vertical-align:top;">:</td><td><div></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">delimiters</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>{{</div></td></tr><tr><td><div>}}</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">files</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">flash</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">form_label_separator</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">formstyle</td><td style="vertical-align:top;">:</td><td><div>bootstrap3_inline</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">generic_patterns</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">google_analytics_id</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">headers</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">X-Powered-By</td><td style="vertical-align:top;">:</td><td><div>web2py</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">logo</td><td style="vertical-align:top;">:</td><td><div><a class="navbar-brand" href="https://iflyout.com/travel/default">IFLYOUT.COM</a></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">menu</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div><table><tr><td><div>Flights</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/travel/default/home</div></td></tr><tr><td><div><table></table></div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Airport Change</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>#</div></td></tr><tr><td><div><table><tr><td><div><table><tr><td><div>Source Airport Change</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/travel/default/user_profile</div></td></tr></table></div></td></tr><tr><td><div><li class="divider"></li></div></td></tr><tr><td><div><table><tr><td><div>Destination Airport Change</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/travel/default/destinations</div></td></tr></table></div></td></tr></table></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">meta</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">author</td><td style="vertical-align:top;">:</td><td><div>Your Name &lt;you@example.com&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">description</td><td style="vertical-align:top;">:</td><td><div>a cool new app</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">generator</td><td style="vertical-align:top;">:</td><td><div>Web2py Web Framework</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">keywords</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>web2py</div></td></tr><tr><td><div>python</div></td></tr><tr><td><div>framework</div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">models_to_run</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>^\\w+\\.py$</div></td></tr><tr><td><div>^default/\\w+\\.py$</div></td></tr><tr><td><div>^default/process_screenshots/\\w+\\.py$</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">postprocessing</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_client</td><td style="vertical-align:top;">:</td><td><div>199.169.204.177</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_cookie_compression_level</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_cookie_expires</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_data_name</td><td style="vertical-align:top;">:</td><td><div>session_data_travel</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_file</td><td style="vertical-align:top;">:</td><td><div>&lt;open file &#x27;/home/www-data/web2py/applications/travel/sessions/097/11e/199.169.204.177-c11e6655-6f0e-4b3b-aab8-2ab661222609&#x27;, mode &#x27;rb+&#x27; at 0x7f6b2b91b1e0&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_filename</td><td style="vertical-align:top;">:</td><td><div>/home/www-data/web2py/applications/travel/sessions/199.169.204.177-c11e6655-6f0e-4b3b-aab8-2ab661222609</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_hash</td><td style="vertical-align:top;">:</td><td><div>ce24ad9c24ffc233b17d84cf59413022</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_id</td><td style="vertical-align:top;">:</td><td><div>199.169.204.177-c11e6655-6f0e-4b3b-aab8-2ab661222609</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_id_name</td><td style="vertical-align:top;">:</td><td><div>session_id_travel</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_locked</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_masterapp</td><td style="vertical-align:top;">:</td><td><div>travel</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_new</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_storage_type</td><td style="vertical-align:top;">:</td><td><div>file</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">status</td><td style="vertical-align:top;">:</td><td><div>200</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">subtitle</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">title</td><td style="vertical-align:top;">:</td><td><div>Travel</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">view</td><td style="vertical-align:top;">:</td><td><div>default/process_screenshots.html</div></td></tr></table></div>'
tRp264
sS'locals'
p265
(dp266
S'fields'
p267
S"[(<pydal.objects.Field object>, 'https://www.google.com/flights/#search;f=SFO;t=ORD;d=2016-06-30;r=2016-07-03'), (<pydal.objects.Field object>, 'ORD'), (<pydal.objects.Field object>, 'flight2016-06-30->2016-07-03.png'), (<pydal.objects.Field object>, True), (<pydal.objects.Field object>, 23L), (<pydal.objects.Field object>, datetime.datetime(2016, 6, 24, 10, 36, 42, 565105)), (<pydal.objects.Field object>, '2016-07-03'), (<pydal.objects.Field object>, datetime.datetime(2016, 6, 24, 10, 36, 42, 565105)), (<pydal.objects.Field object>, <function lazy_user>), (<pydal.objects.Field object>, 'SFO'), (<pydal.objects.Field object>, '2016-06-30')]"
p268
sS'self'
p269
S'<pydal.adapters.mysql.MySQLAdapter object>'
p270
sS'e'
S"InternalError(1205, u'Lock wait timeout exceeded; try restarting transaction')"
p271
sS'table'
p272
S'<Table user_request_images (id, image_path, link...created_by, is_active, modified_on, modified_by)>'
p273
sS'query'
p274
S'"INSERT INTO user_request_images(link_to,destinat...03\',\'2016-06-24 10:36:42\',23,\'SFO\',\'2016-06-30\');"'
p275
sssS'traceback'
p276
S'Traceback (most recent call last):\n  File "/home/www-data/web2py/gluon/restricted.py", line 227, in restricted\n    exec ccode in environment\n  File "/home/www-data/web2py/applications/travel/controllers/default.py", line 313, in <module>\n  File "/home/www-data/web2py/gluon/globals.py", line 417, in <lambda>\n    self._caller = lambda f: f()\n  File "/home/www-data/web2py/applications/travel/controllers/default.py", line 223, in process_screenshots\n    call_all_destinations(source, weekend_dates,dest, start_index)\n  File "/home/www-data/web2py/applications/travel/controllers/default.py", line 187, in call_all_destinations\n    browser_screenshot(url,start_date, end_date,d,source)\n  File "/home/www-data/web2py/applications/travel/controllers/default.py", line 172, in browser_screenshot\n    db.user_request_images.insert(image_path=image, link_to=url, source_code = source, destination_code = dest, depart_date = start_date, return_date = end_date )\n  File "/home/www-data/web2py/gluon/packages/dal/pydal/objects.py", line 726, in insert\n    ret = self._db._adapter.insert(self, self._listify(fields))\n  File "/home/www-data/web2py/gluon/packages/dal/pydal/adapters/base.py", line 746, in insert\n    raise e\nInternalError: (1205, u\'Lock wait timeout exceeded; try restarting transaction\')\n'
p277
s.